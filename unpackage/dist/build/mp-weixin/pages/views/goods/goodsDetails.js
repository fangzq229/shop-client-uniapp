(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/views/goods/goodsDetails"],{2821:function(o,t,n){"use strict";n.r(t);var e=n("876b"),i=n.n(e);for(var s in e)"default"!==s&&function(o){n.d(t,o,(function(){return e[o]}))}(s);t["default"]=i.a},"28e8":function(o,t,n){"use strict";(function(o){n("fffe");e(n("66fd"));var t=e(n("a487"));function e(o){return o&&o.__esModule?o:{default:o}}o(t.default)}).call(this,n("543d")["createPage"])},"637d":function(o,t,n){},7753:function(o,t,n){"use strict";var e=n("637d"),i=n.n(e);i.a},"876b":function(o,t,n){"use strict";(function(o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=n("cced"),i=getApp(),s=function(){Promise.all([n.e("common/vendor"),n.e("components/uni-popup/uni-popup")]).then(function(){return resolve(n("cd11"))}.bind(null,n)).catch(n.oe)},a=function(){n.e("pages/commponent/public/navBar").then(function(){return resolve(n("ac49"))}.bind(null,n)).catch(n.oe)},c=function(){Promise.all([n.e("common/vendor"),n.e("pages/commponent/public/sku")]).then(function(){return resolve(n("22a0"))}.bind(null,n)).catch(n.oe)},u=function(){n.e("pages/commponent/public/coupon").then(function(){return resolve(n("95c7"))}.bind(null,n)).catch(n.oe)},l=function(){n.e("pages/commponent/public/loading").then(function(){return resolve(n("ef74"))}.bind(null,n)).catch(n.oe)},d=function(){Promise.all([n.e("common/vendor"),n.e("pages/commponent/goods/poster")]).then(function(){return resolve(n("84d2"))}.bind(null,n)).catch(n.oe)},r={data:function(){return{colors:"",shows:!1,statusBarHeight:i.globalData.statusHeight+"px",toBar:i.globalData.toBar+"px",showdots:!1,swiperList:[],isColl:!1,latitude:"",longitude:"",nowList:{},goodsData:{bigImg:[],skus:[{}]},showModal:!1,couponshow:!1,isshowVideo:!0,voice:!1,showVideo:!1,isShow:!0,couponList:[{money:100,reduce:10,date:"2020-02-09 2020-10-02",id:1,status:0,condition:["新人专享","仅在支付时使用","可与其他产品共享"]},{money:100,reduce:20,date:"2020-02-09 2020-10-02",id:2,status:0,condition:["新人专享"]},{money:100,reduce:30,date:"2020-02-09 2020-10-02",id:3,status:0,condition:["仅在支付时使用","可与其他产品共享"]},{money:100,reduce:40,date:"2020-02-09 2020-10-02",id:4,status:0,condition:["新人专享","可与其他产品共享"]},{money:100,reduce:50,date:"2020-02-09 2020-10-02",id:5,status:0,condition:["新人专享","仅在支付时使用"]}],htmlNode:"",goodsEva:[],commentCount:0,scrollShow:!1}},components:{navBar:a,sku:c,coupon:u,loading:l,poster:d,uniPopup:s},props:{},onLoad:function(o){var t=this;this.setData({colors:i.globalData.newColor}),this.getLocation(),this.getProductInfo(o.productId),this.getProductComment(o.productId),setTimeout((function(){t.setData({isShow:!1})}),600)},onReady:function(){this.videoContext=o.createVideoContext("myVideo"),this.nowVideo=o.createVideoContext("nowVideo"),console.log(this.videoContext)},onShow:function(){},onHide:function(){},onPageScroll:function(o){o.scrollTop>=400?this.scrollShow=!0:this.scrollShow=!1},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){return{title:this.goodsData.title,path:"/pages/views/goods/goodsDetails",imageUrl:this.goodsData.img}},onShareTimeline:function(){return{title:this.goodsData.title,path:"/pages/views/goods/goodsDetails",imageUrl:this.goodsData.img}},methods:{getLocation:function(){var t=this;o.getLocation({type:"wgs84",geocode:!0,success:function(o){console.log("获取经纬度成功",o),t.setData({latitude:o.latitude,longitude:o.longitude})},fail:function(){console.log("获取经纬度失败"),t.setData({latitude:"",longitude:""})},complete:function(){}})},setFrom:function(o){var t=o.replace(/\<img/gi,'<img class="rich-img" ');this.setData({htmlNode:t})},openPoster:function(){var t=this;if(!(0,e.getToken)())return o.navigateTo({url:"/pages/login/login"});this.shows=!1,o.showLoading({title:"海报绘制中.."}),this.$refs.popup.open(),setTimeout((function(){o.hideLoading(),t.shows=!0}),600)},setisColl:function(){var t=this;if(!(0,e.getToken)())return o.navigateTo({url:"/pages/login/login"});o.$ajax("/api/product/collection",{productId:this.goodsData.id,status:this.goodsData.isCollection?2:1},"post").then((function(n){t.goodsData.isCollection=!t.goodsData.isCollection,t.goodsData.isCollection?o.showToast({title:"收藏成功",icon:"none"}):o.showToast({title:"取消收藏",icon:"none"})})).catch((function(t){o.showToast({title:t,icon:"none"})}))},openMap:function(){o.openLocation({latitude:39.9,longitude:116.4,success:function(o){}})},nearAddress:function(){if(""!==this.longitude)this.openMap();else{var t=this;o.getSetting({success:function(n){n&&n.authSetting&&n.authSetting.hasOwnProperty("scope.userLocation")&&o.openSetting({success:function(){t.getLocation()}})}})}},onhide:function(){this.showModal=!1},openSku:function(){this.nowList=this.goodsData,this.showModal=!0},opencoupon:function(){this.couponshow=!0},hidecoupon:function(){this.couponshow=!1},toHome:function(){o.switchTab({url:"/pages/views/tabBar/home"})},toCart:function(){o.switchTab({url:"/pages/views/tabBar/cart"})},onplay:function(){this.setData({isshowVideo:!1}),this.videoContext.play()},setvoice:function(){var o=!this.voice;this.setData({voice:o})},swiperchange:function(o){this.videoContext&&(0!=o.detail.current?this.videoContext.pause():0==o.detail.current&&0==this.isshowVideo&&this.videoContext.play())},openvideo:function(){var o=this;this.setData({showVideo:!0}),setTimeout((function(){o.videoContext.pause(),o.nowVideo.play()}),200)},closeVideo:function(){var o=this;this.setData({showVideo:!1}),setTimeout((function(){o.nowVideo.stop(),o.videoContext.play()}),300)},preview:function(t,n){o.previewImage({current:n,urls:t})},goTop:function(){o.pageScrollTo({scrollTop:0})},onReceive:function(t,n){console.log(t,n),1!=t.status&&(this.couponList[n].status=1,o.showToast({title:"领取成功",icon:"none"}))},seeAll:function(){o.navigateTo({url:"/pages/views/goods/goodsEvaluate?productId="+this.goodsData.id})},getProductInfo:function(t){var n=this;o.$ajax("/api/product/info",{productId:t}).then((function(o){n.goodsData=o})).catch((function(t){o.showToast({title:t,icon:"none"})}))},getProductComment:function(t){var n=this;o.$ajax("/api/comment/product-list",{productId:t,page:1,pageSize:2}).then((function(o){console.log(o),n.goodsEva=o.items,n.commentCount=o.count})).catch((function(t){o.showToast({title:t,icon:"none"})}))}}};t.default=r}).call(this,n("543d")["default"])},a487:function(o,t,n){"use strict";n.r(t);var e=n("a547"),i=n("2821");for(var s in i)"default"!==s&&function(o){n.d(t,o,(function(){return i[o]}))}(s);n("7753");var a,c=n("f0c5"),u=Object(c["a"])(i["default"],e["b"],e["c"],!1,null,"7316f867",null,!1,e["a"],a);t["default"]=u.exports},a547:function(o,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return e}));var e={uniPopup:function(){return Promise.all([n.e("common/vendor"),n.e("components/uni-popup/uni-popup")]).then(n.bind(null,"cd11"))}},i=function(){var o=this,t=o.$createElement;o._self._c},s=[]}},[["28e8","common/runtime","common/vendor"]]]);